name: ğŸš€ Deploy GitHub Pages from Release ZIP

# åœ¨ release å‘å¸ƒæ—¶è§¦å‘
on:
  release:
    types: [published]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: read          # è¯»å–ä»“åº“å†…å®¹
      pages: write            # æ¨é€åˆ° Pages
      id-token: write         # ç”¨äº OIDC èº«ä»½éªŒè¯

    steps:
      # ä¸‹è½½ Release ZIP èµ„äº§
      - name: Download release ZIP
        uses: dawidd6/action-download-release-asset@v2
        with:
          repository: ${{ github.repository }}
          tag: ${{ github.event.release.tag_name }}
          asset_name: WebGL_Demo.zip          # ä½ åœ¨ Release ä¸Šä¼ çš„ ZIP åç§°
          download_path: ./releases

      # è§£å‹ ZIP åˆ° output ç›®å½•
      - name: Extract site content
        run: |
          mkdir output
          unzip -q ./releases/site.zip -d output

      # å¿…é¡»å…ˆé…ç½® Pages ç¯å¢ƒï¼ˆè®¾ç½®éƒ¨ç½²åˆ†æ”¯ã€æ–‡ä»¶å¤¹ç­‰ï¼‰
      - name: Configure Pages
        uses: actions/configure-pages@v3

      # ä¸Šä¼ è§£å‹åçš„é™æ€æ–‡ä»¶ï¼Œä½œä¸ºåç»­éƒ¨ç½²çš„æ•°æ®æº
      - name: Upload Pages artifact
        uses: actions/upload-pages-artifact@v1
        with:
          path: output

      # éƒ¨ç½²åˆ° GitHub Pages
      - name: Deploy to GitHub Pages
        uses: actions/deploy-pages@v1
